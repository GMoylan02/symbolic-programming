add2(0,0,0).
add2(0,X,Z):- add2(X,0,Z).

add2(s(p(X)),Y,Z) :- add2(X,Y,Z).
add2(p(s(X)),Y,Z) :- add2(X,Y,Z).

add2(s(X), Y, s(Z)) :- add2(X,Y,Z).
add2(s(X+W),Y,s(Z)) :- add2(X+W,Y,Z).
add2(X+W,Y,Z):- add2(X,W,A),add2(A,Y,Z).
add2(s(X+W),Y,s(Z)) :- add2(X,Y+W,Z).

add2(p(X),Y,p(Z)) :- add2(X,Y,Z).
add2(s(X),p(Y),Z):- add2(X,Y,Z).
add2(p(X),s(Y),Z) :- add2(X,Y,Z).

add2(p(X)+s(W),Y,Z):- add2(X+W,Y,Z).
add2(X, Y, p(s(Z))) :- add2(X,Y,Z).
